!function(e,n){"object"==typeof module&&module.exports?(module.exports=n(e),module.exports["default"]=module.exports):e.XHR=n(e)}("undefined"!=typeof window?window:this,function(){var e=function(e){var n=function(e){var n,t={};return e.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,function(e,o,r){n=t[o],t[o]=n?n+","+r:r}),{status:e.status,statusText:e.statusText,url:e.responseURL,text:e.responseText,responseType:e.responseType,headers:t,ok:function(){return 1==(e.status/200|0)},json:function(){return JSON.parse(e.responseText)},xml:function(){return e.responseXML},blob:function(){return new Blob([e.response])}}},t="",o="",r={},u="",s=e!==!1,i={},c=new XMLHttpRequest,f=function(e,n){e&&n&&(i[e]=n)},a=function(e){return i[e]?i[e]:function(){}},p=function(){if(4===c.readyState){var e=n(c);a("ready")(e,H),200===c.status?a("success")(e,H):a("fail")(e,H)}},d=function(e,n){r[e]=n},l=function(e){s=e},y=function(e){if(e&&"object"==typeof e){var n=encodeURIComponent,t=[];for(var o in e)t.push(n(o)+"="+n(e[o]));return t.join("&")}return""},x=function(e,n,r,s,i){return t=e,o=n,u=r,f("success",s),f("fail",i),m()},T=function(e,n,t,o){return n=y(n),n&&(e=e+"?"+n),x("GET",e,"",t,o)},b=function(e,n,t,o){return d("Content-Type","application/json"),"object"==typeof n&&(n=y(n),d("Content-Type","application/x-www-form-urlencoded")),x("POST",e,n,t,o)},m=function(){c.open(t,o,s);for(var e in r)c.setRequestHeader(e,r[e]);return c.onreadystatechange=p,c.send(u),H},w=function(){c&&c.abort()},v=function(){return o},R=function(){return u},j=function(){s=!0,o="",u="",t="",r={},i={}},H={url:v,body:R,on:f,setRequestHeader:d,setAsync:l,request:x,get:T,post:b,abort:w,reset:j};return H};return e});